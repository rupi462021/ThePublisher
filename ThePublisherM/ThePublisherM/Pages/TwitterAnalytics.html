<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Analytics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="../Scripts/jquery-3.6.0.min.js"></script>
    <!--<script src="../Scripts/jquery-3.4.1.min.js"></script>-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--<script src="jquery-3.5.1.min.js"></script>-->
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <!--     Fonts and icons     -->
    <!--<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />-->
    <!-- CSS Files -->
    <!--<link href="../assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />-->
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <!--<link href="../assets/css/demo.css" rel="stylesheet" />-->
    <!--   Core JS Files   -->
    <!--<script src="../assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
    <script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="../assets/js/core/bootstrap.min.js" type="text/javascript"></script>-->
    <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
    <!--<script src="../assets/js/plugins/bootstrap-switch.js"></script>-->
    <!--  Google Maps Plugin    -->
    <!--<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>-->
    <!--  Chartist Plugin  -->
    <!--<script src="../assets/js/plugins/chartist.min.js"></script>-->
    <!--  Notifications Plugin    -->
    <!--<script src="../assets/js/plugins/bootstrap-notify.js"></script>-->
    <!-- Control Center for Light Bootstrap Dashboard: scripts for the example pages etc -->
    <!--<script src="../assets/js/light-bootstrap-dashboard.js?v=2.0.0 " type="text/javascript"></script>-->
    <!-- Light Bootstrap Dashboard DEMO methods, don't include it in your project! -->
    <!--<script src="../assets/js/demo.js"></script>-->
    <!--<link href="style.css" rel="stylesheet" />-->
    <!--  jQuery -->
    <!--<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>-->
    <!-- Isolated Version of Bootstrap, not needed if your site already uses Bootstrap -->
    <!--<link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />-->
    <!-- Bootstrap Date-Picker Plugin -->
    <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" />-->
    <style>
        .fakeimg {
            height: 600px;
        }


        .wrap {
            justify-content: space-between;
        }

        .logo {
            overflow: hidden;
            text-align: left;
            position: relative;
            height: 60px;
            background-color: white;
            color: #1F6C8B;
            font-family: Arial;
        }

        #hello_user {
            margin-left: 600px;
        }

        body {
            direction: rtl;
        }

        .container {
            text-align: right;
        }

        #showTwitterItems {
            scroll-behavior: smooth;
        }

        .row {
            padding: 10px;
        }

        .fa-twitter-square:before {
            content: "\f081";
            font-size: 20px;
        }
        .list-group-item-action {
            border: 1px solid rgba(0,0,0,.125);
        }
        .realTime {
            display: flex;
            justify-content: space-around;
        }
        .card-body {
            border-style: outset;
            text-align:center;
        }
    </style>
    <link href="style.css" rel="stylesheet" />


    <!--  jQuery -->
    <!--<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>-->
    <!-- Isolated Version of Bootstrap, not needed if your site already uses Bootstrap -->
    <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />

    <!-- Bootstrap Date-Picker Plugin -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" />
    <script src="../Scripts/ajaxCalls.js"></script>


    <script>
        $(document).ready(function () {
            console.log("inAnalytics!");
            checkUser();
            $('a').click(function () {
                $('a').removeClass('active');
                $(this).addClass('active');
                /*let a = $(this).text();*/
            });

            /*$("#test").click(GetTweets);*/
            /*RequestToken();*/
            /*$("#getData").click(showData);*/
            /*$("#select_f").change(selectFeature);*/
            //demo.initDashboardPageCharts();
            //demo.showNotification();
            $("#logOut").click(function () {
                document.location = "login.html";
                localStorage.clear();
            });


        });

        //function RequestToken() {
        //    console.log("in Request!");
        //    let apire = "https://api.twitter.com/oauth/request_token";
        //    ajaxCall("POST", apire, "", getTokenS, getTokenE);
        //}
        //function getTokenS(data) {
        //    console.log(data);
        //}
        //function getTokenE(err) {
        //    console.log(err);
        //}

        function checkUser() {
            if (localStorage["userObject"] != null) {
                tastStr = JSON.parse(localStorage["userObject"]);
                $("#userName").append(tastStr.email);
            }
            else {
                tastStr = [];
            }
        }


        function showData() {
            console.log("in Twitt!");

            let apiTw = "../api/Twitter";
            ajaxCall("GET", apiTw, "", getTokenSuccess, getTokenError);
        }
        function getTokenSuccess(data) {
            console.log(data);

            $("#showTwitterItems").empty();
            $("#showTwitterItems").html("");
            str = "";
            str += "<h5>האחרונים בטוויטר</h5>";
            str += "<div id='scroll' style='overflow-y: scroll; overflow-x: hidden; height: 450px;'>";
            str += "<a class='twitter-timeline' data-theme='dark' href='https://twitter.com/rupi46?ref_src=twsrc%5Etfw'>Tweets by rupi46</a>";
            str += "<script async src='https://platform.twitter.com/widgets.js' charset='utf-8'>";
            str += "<'/script>";
            str += "</div >";

            $("#showTwitterItems").append(str);

        }
        function getTokenError(err) {
            console.log(err);
        }

        function showFeature() {
            //tt = $(this).text();
            //kkk = $('a').text();
            //valy = $(".list-group-item").text();
            $("#showTwitterItems").empty();
            $("#showTwitterItems").html("");
            str = "";
            str += "<h5>Likes</h5>";
            str += "<div id='scroll' style='overflow-y: scroll; overflow-x: hidden; height: 450px;'>";

            //str += "<a class='twitter-timeline' href='https://twitter.com/rupi46/" + data + "?ref_src=twsrc%5Etfw'>Tweets Liked by @rupi46</a>";

            str += "<a class='twitter-timeline' data-theme='dark' href='https://twitter.com/rupi46/likes?ref_src=twsrc%5Etfw'>Tweets Liked by @rupi46</a>";
            str += "<script async src='https://platform.twitter.com/widgets.js' charset='utf-8'>";
            str += "<'/script>";
            str += "</div >";
            $("#showTwitterItems").append(str);
            console.log(str);
                 
        }
        //function checkData() {
        //    let dateTwitt = $(".timeline-Tweet-metadata").innerText;
        //    let idTwitt = $(".TweetAction").attributes["data-scribe"].ownerElement.search;
        //    let idTwitter = $(".TweetAction").attributes["data-scribe"].ownerElement.search.split("=")[1];
            
        //}


        function GetTweets() {
            console.log("in testttt!");
                        /*let endpointURL = "https://api.twitter.com/2/tweets?id="*/;
            //let endpointURL = "api.twitter.com/2/tweets?id=";
            ///*tweet_ids = "1261326399320715264,1278347468690915330";*/
            // params = {
            //     "id": "1399325875796119552", // Edit Tweet IDs to look up
            //     "tweet.fields": "created_at", // Edit optional query parameters here
            //    "user.fields": "created_at" // Edit optional query parameters here
            // }

            //$.ajax({
            //    url: endpointURL,
            //    data: data,
            //    success: success,
            //    dataType: dataType
            //});




            /*let apiTw = "api.twitter.com/1.1/statuses/user_timeline.json?screen_name=rupi46";*/
            /*let apiTw = "/2/users/{id}";*/
            let apiz = "https://api.twitter.com/2/tweets";
            ajaxCall("POST", apiz, "", getTSuccess, getTError);
        }
        function getTSuccess(data) {
            console.log(data);
        }
        function getTError(err) {
            console.log(err);
        }

        //function RequestDataSuccess(data) {
        //console.log(data);
        //var xml = new XMLHttpRequest();
        //xml.open('GET', url, false);
        //xml.send(null);
        //alert(xml.responseText);
        //return xml.responseText;
        //}
        //function RequestDataError(err) {
        //console.log(err);
        //}
    </script>
</head>
<body>
    <div class="jumbotron text-center" style="margin-bottom:0">
        <img src="../Images/1200px-Kan11Logo.svg.png" width="150" height="100" />
    </div>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <a class="navbar-brand" href="#" onclick="document.location='MainPage.html'">ראשי</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="document.location='ItemPage.html'">יצירת אייטם</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="document.location='SavedItems.html'">אייטמים שנשמרו</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="document.location='videoPage.html'">וידאו</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="document.location='Managerlogin.html'">כניסת מנהל</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">ניתוחים</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="userName" href="#"></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="logOut" href="#">התנתק</a>
                </li>
            </ul>

        </div>
    </nav>
    <div class="container" style="margin-top:10px">
        <div class="content">
            <div class="container-fluid">
                <div class="row" id=" header_social">
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body">
                                <h2 class="card-title">טוויטר</h2>
                                <h5 class="card-text">ניתוחי אייטמים</h5>
                                <img src="../Images/social-1834013_1920.png" width="150" height="150" />

                            </div>
                        </div>

                    </div>
                    <div class="col-sm-8">
                        <div class="card">
                            <div class="card-body">
                                <h2 class="card-title">צפייה וסקירה של כל האייטמים בזמן אמת</h2>
                                <h5 class="card-text">ציר הזמן, התגובות, הלייקים, והשיתופים..</h5>
                                <img src="../Images/smartphone-586944_1920.jpg" width="500" height="150" />

                            </div>
                        </div>

                    </div>
                </div>
                <hr>
                <div class="row" id="select_data">
                    <div class="col-sm-6">
                        <h3>נתונים לצפייה</h3>
                        <div class="list-group">
                            <ul class="nav nav-pills flex-column">
                                <li class="nav-item">
                                    <a class="list-group-item list-group-item-action active" href="#" onclick="showData()">timeline</a>
                                </li>
                                <li class="nav-item">
                                    <a class="list-group-item list-group-item-action" href="#" onclick="showFeature()">Likes</a>
                                </li>

                            </ul>
                        </div>

                        <!--<button id="getData" type="button" class="btn btn-primary">Get Twitter <i class="fa fa-twitter-square"></i></button>-->
                    </div>
                    <div class="col-sm-6" id="showTwitterItems">

                    </div>
                    <!--<button id="test">Testttt</button>-->

                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-12">

                        <div class="card">
                            <div class="card-body">
                                <h2 class="card-title"> בזמן אמת</h2>
                                <h5 class="card-text">ציוצים, לייקים ותגובות בזמן אמת..</h5>
                                <div class="realTime">

                                    <div class="addTwitt">
                                        <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a>
                                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                    </div>
                                    <div class="follow">
                                        <a href="https://twitter.com/rupi46?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @rupi46</a>
                                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                    </div>
                                    <div class="mention">
                                        <a href="https://twitter.com/intent/tweet?screen_name=rupi46&ref_src=twsrc%5Etfw" class="twitter-mention-button" data-show-count="false">Tweet to @rupi46</a>
                                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                    </div>
                                    <div class="topic">
                                        <a href="https://twitter.com/intent/tweet?button_hashtag=what&ref_src=twsrc%5Etfw" class="twitter-hashtag-button" data-show-count="false">Tweet #what</a>
                                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                    </div>

                                </div>

                            </div>
                        </div>

                    </div>


                </div>
                <hr>
                <br />
                <div class="row">
                    <div class="col">
                        <h2>חדשות</h2>
                        <div class=" row">
                            <div class="col">
                                <h5>הציוצים</h5>
                                <div class="news">
                                    <div id='scroll' style='overflow-y: scroll; overflow-x: hidden; height: 400px;'>
                                        <a class="twitter-timeline" data-theme="dark" href="https://twitter.com/kann_news?ref_src=twsrc%5Etfw">Tweets by kann_news</a>
                                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <h5>האהובים</h5>
                                <div class="likedpost">
                                    <div id='scroll' style='overflow-y: scroll; overflow-x: hidden; height: 400px;'>
                                        <a class="twitter-timeline" data-theme="dark" href="https://twitter.com/kann_news/likes?ref_src=twsrc%5Etfw">Tweets Liked by @kann_news</a>
                                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                    </div>


                                </div>
                            </div>
                        </div>

                    </div>

                </div>
                <hr>
                <div class="row">
                    <div class="col">
                        <h2>תכנים כאן 11</h2>
                        <div class=" row">
                            <div class="col">
                                <h5>הציוצים</h5>
                                <div class="tv_show">
                                    <div id='scroll' style='overflow-y: scroll; overflow-x: hidden; height: 400px;'>
                                        <a class="twitter-timeline" data-theme="dark" href="https://twitter.com/kann?ref_src=twsrc%5Etfw">Tweets by kann</a>
                                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <h5>האהובים</h5>
                                <div class="tv_show">
                                    <div id='scroll' style='overflow-y: scroll; overflow-x: hidden; height: 400px;'>
                                        <a class="twitter-timeline" data-theme="dark" href="https://twitter.com/kann/likes?ref_src=twsrc%5Etfw">Tweets Liked by @kann</a>
                                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>

                </div>               
                <hr>
             
            </div>
        </div>
    </div>
    <div class="jumbotron text-center" style="margin-bottom:0">
        <div class="row">
            <div class="col-sm-4">
                <img id="logo_kan" src="../Images/1200px-Kan11Logo.svg.png" width="40" height="40" />
                <br />
                <a href="https://www.kan.org.il/">www.kan.org.il</a>
            </div>
        </div>
    </div>

</body>

</html>